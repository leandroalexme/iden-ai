import {
    a as n
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-BJKDAX5B.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-PJEQGESF.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-VBQ72NC4.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-RDXN3NMA.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-NRKM3O27.js";
import {
    a as m,
    b as w
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-LVYVYHLB.js";
import {
    c as p,
    d as b
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-PTAQN7XC.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-UT22G6CJ.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-O454CSQB.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-3UDZKVR2.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-LNRZGIXR.js";
import {
    o as f
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-KSXA7H77.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-VFUQL75R.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-N2N7GOUG.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-7TFJVZMD.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-2M3GYHUW.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-ZJMKULCD.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-3HBNHCFR.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-HQUF2BFY.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-MWTOBXCT.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-K4MSOFN3.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-OQWTLMV5.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-BBGOCAHY.js";
import {
    q as l,
    r as y
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-YZMXGORB.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-VCWMZ4MQ.js";
import {
    a as v
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-TCPTYTUX.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-BVZRGHXD.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-LFUSN6Y5.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-XGXYOKTY.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-I6JNYDBX.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-ZCYSW665.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-LY4A4ZCW.js";
import {
    a as S
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-QXKVEKVP.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-OQTCXMQ2.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-YNQJOZVU.js";
import {
    D as c,
    F as u
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-6YK6Y3LS.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-X2AVVSDG.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-ESPTCIFT.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-7GYVYFTN.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-FX3USXD4.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-LURZCKUX.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-UHXY36KN.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-ISPIXJKU.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-JIE3ALW5.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-33VGZGAT.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-ILD4NFNU.js";
import "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-BXWTANI3.js";
import {
    d as h,
    f as s
} from "https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-64BUEHBL.js";
w();
var g = h(S()),
    a = h(v());
b();
y();
f();
u();
var d = class extends n {
        constructor(t, e, o) {
            super(t, e, o);
            s(this, "sharedState");
            s(this, "autoplay");
            s(this, "unsubscribeReady");
            s(this, "triggerWidgets", []);
            s(this, "handleClick", function() {
                ++this.sharedState.clickCount
            }.bind(this));
            s(this, "handlePointerHover", function(e) {
                this.sharedState.isPointerIn = e.type === "mouseenter"
            }.bind(this));
            s(this, "handlePointerState", function(e) {
                e.preventDefault(), this.sharedState.isPointerIn = e.type === "pointerdown"
            }.bind(this));
            s(this, "handleTouchSideEffects", function(e) {
                e.preventDefault()
            }.bind(this));
            s(this, "player", {
                play: function() {
                    this.sharedState.player.play()
                }.bind(this),
                pause: function() {
                    this.sharedState.player.stop()
                }.bind(this)
            });
            return this.model = new a.default.Model(t), this.sharedState = new p(this.model.attributes), this.sharedState.renderSimpleVersion = !!window.RM.screenshot, this.sharedState.controlsCursorStyle = e.mag.hoverCursorStyle, n.prototype.initialize.apply(this, [t, e, o]), this
        }
        async render() {
            (this.model.attributes.provider_name || "").toLowerCase() === "vimeo" && m.brokenVimeoThumbnailRegexp.test(this.model.get("thumbnail_url")) && this.model.unset("thumbnail_url"), this.makeBox("video"), this.$el.addClass("no-transparency");
            let {
                renderReact: t
            } = await
            import ("https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-LKSFPTWI.js"), {
                VideoPlayerViewerOld: e
            } = await
            import ("https://st-p.rmcdn1.net/ae5fa58f/dist/c/c-2HGXFXNU.js");
            return t({
                component: () => c(e, {
                    sharedState: this.sharedState,
                    analytics: window.RM.analytics
                }),
                domElement: this.el,
                model: this.model,
                onDestroy: () => {
                    let i = this.el;
                    g.default.unmountComponentAtNode(i), i && i.parentNode && i.parentNode.removeChild(i)
                }
            }), this.unsubscribeReady = this.sharedState.subscribe("isReady", i => {
                i && (this.widgetIsLoaded(), this.unsubscribeReady ? .())
            }), this.checkLink(), this.rendered = !0, this.trigger("rendered"), this
        }
        isValid() {
            return !!(this.model.attributes.url && this.model.attributes.provider_name)
        }
        start() {
            return n.prototype.start.call(this), window.RM.screenshot || this.destroyed ? this : (this.bindTriggers(), this.sharedState.isStarted = !0, this)
        }
        stop() {
            return n.prototype.stop.call(this), !window.RM.screenshot && !this.destroyed && this.sharedState.player && this.rendered && this.sharedState.player.stop(), this.unbindTriggers(), this
        }
        _needAutoStart() {
            return this.autoplay && !l.PageVisibilityManager.isPageHidden()
        }
        getPageScale() {
            return this.page.mag.getScale(this.page.viewport)
        }
        async bindTriggers() {
            let t = this.model.attributes.triggers ? .length ? this.model.attributes.triggers : [this.model.attributes._id];
            for (let e of t) {
                let o = await this.page.mag.getAllWidgetViewsByIdAsync(e, this.page);
                for (let i of o) {
                    let r = i.el;
                    if (r instanceof HTMLElement) {
                        switch (this.model.attributes.custom_controls ? .playbackType) {
                            case "Click":
                                r.addEventListener("click", this.handleClick);
                                break;
                            case "Hover":
                                r.addEventListener("mouseenter", this.handlePointerHover), r.addEventListener("mouseleave", this.handlePointerHover), "ontouchstart" in window && (r.addEventListener("pointerdown", this.handlePointerState), r.addEventListener("pointerup", this.handlePointerState), r.addEventListener("pointerleave", this.handlePointerState)), r.addEventListener("touchstart", this.handleTouchSideEffects), r.addEventListener("contextmenu", this.handleTouchSideEffects);
                                break
                        }
                        this.triggerWidgets.push(i)
                    }
                }
            }
        }
        unbindTriggers() {
            for (let t of this.triggerWidgets) {
                let e = t.el;
                e instanceof HTMLElement && (e.removeEventListener("click", this.handleClick), e.removeEventListener("mouseenter", this.handlePointerHover), e.removeEventListener("mouseleave", this.handlePointerHover), e.removeEventListener("pointerdown", this.handlePointerState), e.removeEventListener("pointerup", this.handlePointerState), e.removeEventListener("pointerleave", this.handlePointerState), e.removeEventListener("touchstart", this.handleTouchSideEffects), e.removeEventListener("contextmenu", this.handleTouchSideEffects))
            }
        }
        destroy(...t) {
            this.sharedState.player ? .stop(), this.unsubscribeReady ? .(), n.prototype.destroy.apply(this, t)
        }
        updateVideoWidget(t) {
            this.unbindTriggers(), this.model = new a.default.Model(t), this.sharedState.widget = t, this.sharedState.pageScale = this.getPageScale(), this.bindTriggers()
        }
    },
    H = d;
export {
    H as
    default
};